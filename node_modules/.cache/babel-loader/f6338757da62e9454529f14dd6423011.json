{"remainingRequest":"/var/www/html/front/node_modules/babel-loader/lib/index.js!/var/www/html/front/node_modules/cache-loader/dist/cjs.js??ref--1-0!/var/www/html/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/front/src/components/signForms/SignUpForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/front/src/components/signForms/SignUpForm.vue","mtime":1637350359339},{"path":"/var/www/html/front/babel.config.js","mtime":1636015662000},{"path":"/var/www/html/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL3Zhci93d3cvaHRtbC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBlbWFpbCwgcmVxdWlyZWQsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoIH0gZnJvbSAndnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzJzsKaW1wb3J0IFRyYW5zbGl0ZXJhdGlvbiBmcm9tICIuLi8uLi9taXhpbnMvVHJhbnNsaXRlcmF0aW9uIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgcm91dGVyIGZyb20gIi4uLy4uL3JvdXRlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2lnblVwRm9ybSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlY2FwdGNoYTogZmFsc2UsCiAgICAgIGF1dGhFcnJvcjogZmFsc2UsCiAgICAgIGVycm9yVGV4dDogJycsCiAgICAgIG5hbWU6ICcnLAogICAgICBlbWFpbDogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgbmFtZV9lbjogJycsCiAgICAgIGlubjogJycKICAgIH07CiAgfSwKICBwcm9wczogWydzaXRla2V5J10sCiAgbWl4aW5zOiBbVHJhbnNsaXRlcmF0aW9uXSwKICB2YWxpZGF0aW9uczogewogICAgZW1haWw6IHsKICAgICAgZW1haWw6IGVtYWlsLAogICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgIH0sCiAgICBwYXNzd29yZDogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQsCiAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDYpCiAgICB9LAogICAgbmFtZTogewogICAgICByZXF1aXJlZDogcmVxdWlyZWQsCiAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDEwKQogICAgfSwKICAgIGlubjogewogICAgICBtYXhMZW5ndGg6IG1heExlbmd0aCgxNikKICAgIH0KICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyhbJ3JlZ2lzdGVyVXNlckFjdGlvbiddKSksIHt9LCB7CiAgICBzdWJtaXRSZWdpc3RlcjogZnVuY3Rpb24gc3VibWl0UmVnaXN0ZXIoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBjYXB0Y2hhID0gZXZlbnQudGFyZ2V0WydnLXJlY2FwdGNoYS1yZXNwb25zZSddLnZhbHVlOwoKICAgICAgaWYgKHRoaXMuJHYuJGludmFsaWQgfHwgIWNhcHRjaGEpIHsKICAgICAgICB0aGlzLnJlY2FwdGNoYSA9IHRydWU7CiAgICAgICAgdGhpcy4kdi4kdG91Y2goKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlZ2lzdGVyID0gewogICAgICAgICAgdXNlcm5hbWVfbG9jYWw6IHRoaXMubmFtZSwKICAgICAgICAgIHVzZXJuYW1lX2VuZ2xpc2g6IHRoaXMubmFtZV9lbiwKICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgICAgICBpbm46IHRoaXMuaW5uLAogICAgICAgICAgY2FwdGNoYTogY2FwdGNoYQogICAgICAgIH07CiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBmYWxzZTsKICAgICAgICB0aGlzLnJlZ2lzdGVyVXNlckFjdGlvbihyZWdpc3RlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzID09PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMuJHN0b3JlLnN0YXRlLmlzQXV0aCA9IGZhbHNlOwogICAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuYXV0aEVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXMuZGF0YSk7CgogICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgX3RoaXMuZXJyb3JUZXh0ID0gcmVzcG9uc2VbaXRlbV1bMF07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLCAnZXJyb3InKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldFRyYW5zbGl0ZXJhdGlvbjogZnVuY3Rpb24gZ2V0VHJhbnNsaXRlcmF0aW9uKGUpIHsKICAgICAgdGhpcy5uYW1lX2VuID0gdGhpcy50cmFuc2xpdGVyYXRpb24oZS50YXJnZXQudmFsdWUpOwogICAgfQogIH0pCn07"},{"version":3,"sources":["SignUpForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"auth__form sign_up\">\r\n    <form action=\"\" @submit.prevent=\"submitRegister\">\r\n      <div\r\n          class=\"error\"\r\n          v-if=\"authError\"\r\n      >\r\n        неправильные даные\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"\">Фамилия, Имя, Отчество:</label>\r\n        <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            v-model.trim=\"name\"\r\n            @input=\"getTransliteration\"\r\n            :class=\"{invalid:($v.name.$dirty && !$v.name.required) || ($v.name.$dirty && !$v.name.minLength)}\"\r\n        >\r\n        <div\r\n            class=\"error\"\r\n            v-if=\"$v.name.$dirty && !$v.name.required\"\r\n        >\r\n          Поле ФИО не должно быть пустым\r\n        </div>\r\n        <div\r\n            class=\"error\"\r\n            v-else-if=\"$v.name.$dirty && !$v.name.minLength\"\r\n        >\r\n          Поле Фио должно быть не менее {{ $v.name.$params.minLength.min }} символов\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"\">Для международных свидетельств:</label>\r\n        <input type=\"text\" v-model.trim=\"name_en\" name=\"name_en\">\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"\">ИНН: (необязательно)</label>\r\n        <input\r\n            type=\"text\"\r\n            v-model.trim=\"inn\"\r\n            name=\"inn\"\r\n            maxlength=\"16\"\r\n            :class=\"{invalid: ($v.inn.$dirty && !$v.inn.maxLength)}\"\r\n        >\r\n        <div\r\n            class=\"error\"\r\n            v-if=\"$v.inn.$dirty && !$v.inn.maxLength\"\r\n        >\r\n          Поле ИНН должно быть не более 16 символов\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"\">Email:</label>\r\n        <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            v-model.trim=\"email\"\r\n            :class=\"{invalid:($v.email.$dirty && !$v.email.required) || ($v.email.$dirty && !$v.email.email)}\"\r\n        >\r\n        <div\r\n            class=\"error\"\r\n            v-if=\"$v.email.$dirty && !$v.email.required\"\r\n        >\r\n          Поле email не должно быть пустым\r\n        </div>\r\n        <div\r\n            class=\"error\"\r\n            v-else-if=\"$v.email.$dirty && !$v.email.email\"\r\n        >\r\n          Введите корректный Email\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"\">Пароль:</label>\r\n        <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            v-model.trim=\"password\"\r\n            :class=\"{invalid:($v.password.$dirty && !$v.password.required) || ($v.password.$dirty && !$v.password.minLength)}\"\r\n        >\r\n        <div\r\n            class=\"error\"\r\n            v-if=\"$v.password.$dirty && !$v.password.required\"\r\n        >\r\n          Введите пароль\r\n        </div>\r\n        <div\r\n            class=\"error\"\r\n            v-else-if=\"$v.password.$dirty && !$v.password.minLength\"\r\n        >\r\n          Пароль должен быть не менее {{ $v.password.$params.minLength.min }} символов\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n          id=\"g-recaptcha\"\r\n          class=\"g-recaptcha\"\r\n          :data-sitekey=\"sitekey\">\r\n      </div>\r\n      <div\r\n          class=\"error\"\r\n          v-if=\"recaptcha\"\r\n      >\r\n        Подтвердите что вы не робот\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn-orange submit-form\">Зарегестрироваться</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {email, required, minLength, maxLength} from 'vuelidate/lib/validators'\r\nimport Transliteration from \"../../mixins/Transliteration\";\r\nimport {mapActions} from \"vuex\";\r\nimport router from \"../../router\";\r\n\r\nexport default {\r\n  name: \"SignUpForm\",\r\n  data() {\r\n    return {\r\n      recaptcha: false,\r\n      authError: false,\r\n      errorText: '',\r\n      name:'',\r\n      email:'',\r\n      password:'',\r\n      name_en:'',\r\n      inn:''\r\n    }\r\n  },\r\n  props:['sitekey'],\r\n  mixins: [Transliteration],\r\n  validations: {\r\n    email:{email, required},\r\n    password:{required, minLength: minLength(6)},\r\n    name:{required, minLength:minLength(10)},\r\n    inn:{maxLength: maxLength(16)}\r\n  },\r\n  methods: {\r\n    ...mapActions(['registerUserAction']),\r\n    submitRegister(event) {\r\n      let captcha = event.target['g-recaptcha-response'].value;\r\n      if (this.$v.$invalid || !captcha) {\r\n        this.recaptcha = true\r\n        this.$v.$touch()\r\n        return\r\n      } else {\r\n        let register = {\r\n          username_local: this.name,\r\n          username_english: this.name_en,\r\n          email: this.email,\r\n          password: this.password,\r\n          inn: this.inn,\r\n          captcha: captcha\r\n        }\r\n        this.recaptcha = false\r\n        this.registerUserAction(register).then((res) => {\r\n          if (res === 200) {\r\n            this.$store.state.isAuth = false;\r\n            router.push('/')\r\n          } else {\r\n            this.authError = true\r\n            let response = JSON.parse(res.data)\r\n            for (let item in response) {\r\n              this.errorText = response[item][0];\r\n            }\r\n          }\r\n        }).catch((error) => {\r\n          console.log(error, 'error')\r\n        })\r\n      }\r\n    },\r\n    getTransliteration(e) {\r\n      this.name_en = this.transliteration(e.target.value)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.submit-form {\r\n  margin-bottom: 10px !important;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/signForms"}]}