{"remainingRequest":"/var/www/html/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/front/src/components/main_block_app/depositing/setting_depositing/SettingDepositing.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/front/src/components/main_block_app/depositing/setting_depositing/SettingDepositing.vue","mtime":1637311064004},{"path":"/var/www/html/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/var/www/html/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTZXR0aW5nQWRkaXRpb25hbEluZm9ybWF0aW9uIGZyb20gIi4vU2V0dGluZ0FkZGl0aW9uYWxJbmZvcm1hdGlvbiI7CmltcG9ydCBTZXR0aW5nVHlwZSBmcm9tICIuL1NldHRpbmdUeXBlIjsKaW1wb3J0IElucHV0RGF0YU93bmVyIGZyb20gIi4uLy4uLy4uL1VJL2lucHV0L0lucHV0RGF0YU93bmVyIjsKaW1wb3J0IHttYXBNdXRhdGlvbnN9IGZyb20gJ3Z1ZXgnCmltcG9ydCBJbnB1dERhdGFPd25lckVuIGZyb20gIi4uLy4uLy4uL1VJL2lucHV0L0lucHV0RGF0YU93bmVyRW4iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTZXR0aW5nRGVwb3NpdGluZyIsCiAgcHJvcHM6IHsKICAgIHN0YXRlSWQ6IHsKICAgICAgdHlwZTpOdW1iZXIKICAgIH0sCiAgICBQb2ludDogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0sCiAgICBhbGxvd1NhdmU6IHsKICAgICAgdHlwZTogQm9vbGVhbgogICAgfQogIH0sCiAgY29tcG9uZW50czoge0lucHV0RGF0YU93bmVyRW4sIFNldHRpbmdUeXBlLCBTZXR0aW5nQWRkaXRpb25hbEluZm9ybWF0aW9uLCBJbnB1dERhdGFPd25lcn0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmNoZWNrRGF0YSgpCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2F2ZWREZXBvbjogZmFsc2UsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoewogICAgICBtYXBTYXZlRGF0YTonQ2xpZW50U3RvcmFnZXNNb2R1bGUvc2F2ZURhdGEnCiAgICB9KSwKICAgIGNoZWNrRGF0YSgpIHsKICAgICAgaWYgKHRoaXMuUG9pbnQuc3RhdGVJZCA9PT0gMikgewogICAgICAgIHRoaXMuc2F2ZWREZXBvbiA9IHRydWUKICAgICAgfQogICAgfSwKICAgIHN0YXJ0RGVwb24oKSB7CiAgICAgIHRoaXMuUG9pbnQuc3RhdGVJZCA9IDIKICAgIH0sCiAgICBjcmVhdGVOZXdQYXJ0aWNpcGFudCgpIHsKICAgICAgY29uc3QgbmV3UGFydGljaXBhbnQgPSB7CiAgICAgICAgaWQ6IERhdGUubm93KCksCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbmFtZV9lbjogJycKICAgICAgfQogICAgICB0aGlzLlBvaW50LlBhcnRpY2lwYW50cy5wdXNoKG5ld1BhcnRpY2lwYW50KQogICAgfSwKICAgIGNyZWF0ZU5ld0NvbXBhbnkoKSB7CiAgICAgIGNvbnN0IG5ld0NvbXBhbnkgPSB7CiAgICAgICAgaWQ6IERhdGUubm93KCksCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbmFtZV9lbjogJycKICAgICAgfQogICAgICB0aGlzLlBvaW50LkNvbXBhbnkucHVzaChuZXdDb21wYW55KQogICAgfSwKICAgIGNyZWF0ZU5ld0F1dGhvcigpIHsKICAgICAgY29uc3QgbmV3QXV0aG9yID0gewogICAgICAgIGlkOiBEYXRlLm5vdygpLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIG5hbWVfZW46ICcnCiAgICAgIH0KICAgICAgdGhpcy5Qb2ludC5BdXRob3JzLnB1c2gobmV3QXV0aG9yKQogICAgfSwKICAgIHVwZGF0ZUFkZGl0aW9uYWxJbmZvcm1hdGlvbih2YWx1ZSkgewogICAgICB0aGlzLlBvaW50LkFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9IHZhbHVlCiAgICB9LAogICAgcmVtb3ZlUGFydGljaXBhbnQoUGFydGljaXBhbnQpIHsKICAgICAgdGhpcy5Qb2ludC5QYXJ0aWNpcGFudHMgPSB0aGlzLlBvaW50LlBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLmlkICE9PSBQYXJ0aWNpcGFudC5pZCkKICAgIH0sCiAgICByZW1vdmVDb21wYW55KENvbXBhbnkpIHsKICAgICAgdGhpcy5Qb2ludC5Db21wYW55ID0gdGhpcy5Qb2ludC5Db21wYW55LmZpbHRlcihwID0+IHAuaWQgIT09IENvbXBhbnkuaWQpCiAgICB9LAogICAgcmVtb3ZlQXV0aG9yKEF1dGhvcikgewogICAgICB0aGlzLlBvaW50LkF1dGhvcnMgPSB0aGlzLlBvaW50LkF1dGhvcnMuZmlsdGVyKHAgPT4gcC5pZCAhPT0gQXV0aG9yLmlkKQogICAgfSwKICAgIHNhdmVEYXRhKCkgewogICAgICBpZiAodGhpcy5Qb2ludC5QYXJ0aWNpcGFudHMubGVuZ3RoID09PSAwIHx8IHRoaXMuUG9pbnQuQXV0aG9ycy5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLlBvaW50LnN0YXRlSWQgPSAxCiAgICAgICAgdGhpcy5Qb2ludC5BdXRob3JzID0gW10KICAgICAgICB0aGlzLlBvaW50LlBhcnRpY2lwYW50cyA9IFtdCiAgICAgICAgdGhpcy5Qb2ludC5Db21wYW55ID0gW10KICAgICAgICB0aGlzLlBvaW50LkFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9ICcnCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdGhpcy5tYXBTYXZlRGF0YSh0aGlzLlBvaW50KQogICAgICB0aGlzLnNhdmVkRGVwb24gPSB0cnVlCiAgICB9LAogICAgZWRpdERhdGEoKSB7CiAgICAgIHRoaXMuc2F2ZWREZXBvbiA9IGZhbHNlCiAgICB9LAogIH0KfQo="},{"version":3,"sources":["SettingDepositing.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SettingDepositing.vue","sourceRoot":"src/components/main_block_app/depositing/setting_depositing","sourcesContent":["<template>\n  <div\n      @click=\"startDepon\"\n      v-if=\"stateId === 1\"\n      class=\"setting-depositing\"\n  >\n    Настроить депонирование\n  </div>\n  <div\n      v-else-if=\"stateId === 2\"\n      class=\"file-description\"\n      :class=\"{'file-description-disable': savedDepon}\"\n  >\n\n    <div class=\"file-description__point\">\n      <div class=\"file-description__point-item\">\n        <div class=\"title\">Правообладатели:</div>\n        <div class=\"participants items\">\n          <transition-group name=\"item-list\">\n            <input-data-owner\n                v-for=\"men in Point.Participants\"\n                :key=\"men.id\"\n                :savedDepon = savedDepon\n                :Model=\"men\"\n                @remove=\"removeParticipant(men)\"\n            />\n          </transition-group>\n        </div>\n        <div class=\"company items\">\n          <transition-group name=\"item-list\">\n            <input-data-owner\n                v-for=\"com in Point.Company\"\n                :key=\"com.id\"\n                :savedDepon = savedDepon\n                :Model=\"com\"\n                @remove=\"removeCompany(com)\"\n            />\n          </transition-group>\n        </div>\n        <transition name=\"files\">\n          <div v-if=\"!savedDepon\" class=\"add\">\n            <div class=\"add__point\" @click=\"createNewParticipant\">\n              + Добавить участника*\n            </div>\n            <div class=\"add__point\" @click=\"createNewCompany\">\n              + Добавить компанию\n            </div>\n          </div>\n        </transition>\n      </div>\n\n      <div class=\"file-description__point-item js-owners-en\">\n        <div class=\"title\">Owners:</div>\n        <div class=\"participants items\">\n          <div class=\"item\" v-for=\"men in Point.Participants\">\n            <input-data-owner-en\n                :Model=\"men\"\n            />\n          </div>\n        </div>\n        <div class=\"company items\">\n          <div class=\"item\" v-for=\"com in Point.Company\">\n            <input-data-owner-en\n                :Model=\"com\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"file-description__point\">\n      <div class=\"file-description__point-item\">\n        <div class=\"title\">Авторы:</div>\n        <div class=\"participants items\">\n          <transition-group name=\"item-list\">\n            <input-data-owner\n                v-for=\"author in Point.Authors\"\n                :Model=\"author\"\n                :savedDepon = savedDepon\n                :key=\"author.id\"\n                @remove=\"removeAuthor(author)\"\n            />\n          </transition-group>\n        </div>\n        <div class=\"add\">\n          <transition name=\"files\">\n            <div v-if=\"!savedDepon\" class=\"add__point\" @click=\"createNewAuthor\">\n              + Добавить автора*\n            </div>\n          </transition>\n        </div>\n      </div>\n\n      <div class=\"file-description__point-item js-authors-en\">\n        <div class=\"title\">Authors:</div>\n        <div class=\"participants items\">\n          <div class=\"item\" v-for=\"author in Point.Authors\">\n            <input-data-owner-en\n              :Model=\"author\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"file-description__point\">\n      <setting-additional-information\n        :AdditionalInformation = Point.AdditionalInformation\n        :savedDepon = savedDepon\n        @UpdateAdditionalInformation=\"updateAdditionalInformation\"\n      />\n      <setting-type\n        :Type = Point.Type\n        :savedDepon = savedDepon\n      />\n    </div>\n\n    <button\n        v-if=\"!savedDepon && allowSave\"\n        @click=\"saveData\"\n        class=\"save btn-purple\"\n    >\n      СОХРАНИТЬ\n    </button>\n    <button\n        v-if=\"savedDepon && allowSave\"\n        @click=\"editData\"\n        class=\"save btn-edit\"\n    >\n      РЕДАКТИРОВАТЬ\n    </button>\n  </div>\n</template>\n\n<script>\nimport SettingAdditionalInformation from \"./SettingAdditionalInformation\";\nimport SettingType from \"./SettingType\";\nimport InputDataOwner from \"../../../UI/input/InputDataOwner\";\nimport {mapMutations} from 'vuex'\nimport InputDataOwnerEn from \"../../../UI/input/InputDataOwnerEn\";\n\nexport default {\n  name: \"SettingDepositing\",\n  props: {\n    stateId: {\n      type:Number\n    },\n    Point: {\n      type: Object\n    },\n    allowSave: {\n      type: Boolean\n    }\n  },\n  components: {InputDataOwnerEn, SettingType, SettingAdditionalInformation, InputDataOwner},\n  beforeMount() {\n    this.checkData()\n  },\n  data() {\n    return {\n      savedDepon: false,\n    }\n  },\n  methods: {\n    ...mapMutations({\n      mapSaveData:'ClientStoragesModule/saveData'\n    }),\n    checkData() {\n      if (this.Point.stateId === 2) {\n        this.savedDepon = true\n      }\n    },\n    startDepon() {\n      this.Point.stateId = 2\n    },\n    createNewParticipant() {\n      const newParticipant = {\n        id: Date.now(),\n        name: '',\n        name_en: ''\n      }\n      this.Point.Participants.push(newParticipant)\n    },\n    createNewCompany() {\n      const newCompany = {\n        id: Date.now(),\n        name: '',\n        name_en: ''\n      }\n      this.Point.Company.push(newCompany)\n    },\n    createNewAuthor() {\n      const newAuthor = {\n        id: Date.now(),\n        name: '',\n        name_en: ''\n      }\n      this.Point.Authors.push(newAuthor)\n    },\n    updateAdditionalInformation(value) {\n      this.Point.AdditionalInformation = value\n    },\n    removeParticipant(Participant) {\n      this.Point.Participants = this.Point.Participants.filter(p => p.id !== Participant.id)\n    },\n    removeCompany(Company) {\n      this.Point.Company = this.Point.Company.filter(p => p.id !== Company.id)\n    },\n    removeAuthor(Author) {\n      this.Point.Authors = this.Point.Authors.filter(p => p.id !== Author.id)\n    },\n    saveData() {\n      if (this.Point.Participants.length === 0 || this.Point.Authors.length === 0) {\n        this.Point.stateId = 1\n        this.Point.Authors = []\n        this.Point.Participants = []\n        this.Point.Company = []\n        this.Point.AdditionalInformation = ''\n        return\n      }\n      this.mapSaveData(this.Point)\n      this.savedDepon = true\n    },\n    editData() {\n      this.savedDepon = false\n    },\n  }\n}\n</script>\n"]}]}